process.on("message",function(data) {

    var client=data.client;
    var filename=data.filename;
    var filetype=data.filetype;
    var FullPath=global.webPath+filename;

    libFs.exists(FullPath,function(exists){
        if (!exists)
            return client.ShowErr("404:访问了不存在的资源"+fileName)

        client.res.writeHead(200, {"Content-Type": filetype });
        //创建只读流用于返回
        libFs.readFile(FullPath, "binary", function (err, file) {
            if(err)
                return client.ShowErr("404:资源读取失败"+fileName)


            setTimeout(function()
            {
                client.res.write(file, "binary");
                client.res.end();
            },500)


            console.log("完毕:"+fileName)
        });
    })
});